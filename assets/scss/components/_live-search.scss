@use "../base/mixins" as *;
@use "../base/variables" as *;
@use "../base/media-queries" as *;

.live-search {
  position: relative;

  svg {
    pointer-events: none;
  }

  // Form row: input + button
  &__form {
    display: flex;
    align-items: center;

    input {
      flex: 1;
      height: 4rem !important;
      border-right: none !important;
    }
  }

  &__btn {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    width: 4rem;
    height: 4rem;
    padding: 0;
    border: 0.1rem solid $color-gray-5;
    border-left: none;
    background: $color-black;
    color: $color-white;
    cursor: pointer;
    transition: background-color $t-normal ease;

    @include hover {
      background: $color-blue;
    }
  }

  // Results dropdown
  &__results {
    &.is-loading {
      min-height: 4rem;
      background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cstyle%3E%40keyframes s%7B0%25%7Btransform:rotate(0)%7D100%25%7Btransform:rotate(360deg)%7D%7D circle%7Banimation:s .8s linear infinite;transform-origin:center%7D%3C/style%3E%3Ccircle cx='12' cy='12' r='10' fill='none' stroke='%23999' stroke-width='2' stroke-dasharray='32 32'/%3E%3C/svg%3E")
        center no-repeat;
    }
  }

  &__results-inner {
    padding: 0.5rem 0;
  }

  &__section {
    &:not(:first-child) {
      border-top: 0.1rem solid $color-gray-3;
    }
  }

  &__heading {
    padding: 0.8rem 1rem;
    font-size: 1.2rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: $color-gray;
  }

  &__cat-list {
    display: flex;
    flex-direction: column;
  }

  &__cat-item {
    display: block;
    padding: 0.6rem 1rem;
    font-size: 1.4rem;
    color: inherit;
    text-decoration: none;
    transition: background-color $t-normal ease;

    @include hover {
      background-color: $color-light;
    }
  }

  &__show-all {
    padding: 1rem;
    text-align: center;
    border-top: 0.1rem solid $color-gray-3;
  }

  &__empty {
    padding: 1.5rem 1rem;
    text-align: center;
    color: $color-gray;
  }

  // =====================
  // Desktop variant
  // =====================
  &--desktop {
    .live-search__panel {
      position: absolute;
      top: 100%;
      right: 0;
      z-index: 100;
      width: 40rem;
      margin-top: 1rem;
      background: $color-white;
      box-shadow: 0 0.4rem 2rem rgba($color-black, 0.12);
      opacity: 0;
      visibility: hidden;
      transform: translateY(-1rem);
      transition:
        opacity $t-normal ease,
        visibility $t-normal ease,
        transform $t-normal ease;
    }

    .live-search__form {
      padding: 1rem;
    }

    .live-search__results {
      max-height: 40rem;
      overflow-y: auto;
    }

    // Open state
    &.is-open {
      .live-search__panel {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
      }
    }
  }

  // =====================
  // Mobile variant
  // =====================
  &--mobile {
    margin-top: 1.5rem;

    .live-search__results {
      max-height: 50vh;
      overflow-y: auto;
    }
  }
}
